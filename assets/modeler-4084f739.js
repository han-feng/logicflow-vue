import{s as xe}from"./app-b631b5d6.js";import{$ as ye,d as $,a0 as C,H as ge,J as we,o as c,k as w,F as z,V as J,c as S,w as t,a as e,a1 as ke,u as n,a2 as ze,a3 as h,a4 as $e,B as ee,a5 as Ue,_ as Ce,a6 as he,b as x,a7 as T,a8 as M,a9 as ne,aa as te,e as V,r as G,t as N,I as Z,l as Ve,ab as Te,ac as Me,ad as Be,ae as De,af as Le,p as Pe,ag as je,ah as Ie,ai as Se,s as Ee,aj as Ke,ak as Oe,al as Fe,n as He,q as Ne,v as qe,am as Ae,an as Ge,x as Je,y as Re,z as We,ao as Ze,ap as Q,aq as Qe,ar as Xe,as as Ye,at as en,au as nn,av as tn,aw as on,M as ln,ax as an,ay as sn,A as _n,L as un,D as pn}from"./vendor-d3e2096c.js";import{T as B,e as rn,_ as dn,m as X,z as cn}from"./CodeViewer.vue_vue_type_style_index_0_lang-e3132417.js";const mn=["id"],fn=new ye([32,32,1]);function vn(){return`__${fn.next()}`}const Y=(m,o)=>{o.forEach(l=>l.del=!0),Object.keys(m).forEach(l=>{const _=o.find(s=>s.key===l);_?(_.value=m[l],_.del=!1):o.push({key:l,newKey:l.startsWith("__")?"":l,value:m[l],newValue:m[l],del:!1})});let p=o.length;for(let l=0;l<p;l++)o[l].del&&(o.splice(l,1),l--,p--);return o},D=$({__name:"PropertiesEditor",props:{value:null},setup(m){const o=m,{id:p}=C.useInjectFormItemContext(),l=[],_=ge(Y(o.value,[]));we(()=>o.value,(a,d)=>{Y(a,_)},{deep:!0});function s(){o.value[vn()]=""}function u(a){_.splice(_.findIndex(d=>d.key===a),1),delete o.value[a]}function i(a){if(a.key===a.newKey)return;const d=a.newKey;if(d.startsWith("__")){console.log("key 不能以 __ 开头");return}if(_.find(b=>b.key===d)){console.log("存在重复的 key");return}const f=a.key;a.key=d,o.value[d]=a.value,delete o.value[f]}function r(a){a.value!==a.newValue&&(o.value[a.key]=a.newValue)}return(a,d)=>{const f=ze,b=h,y=$e,j=ee,E=Ue,K=Ce,O=he;return c(),w("div",ke({id:n(p)},a.$attrs),[(c(!0),w(z,null,J(_,(U,I)=>(c(),S(K,{key:I},{default:t(()=>[e(E,{compact:""},{default:t(()=>[e(f,{value:U.newKey,"onUpdate:value":L=>U.newKey=L,"dropdown-match-select-width":!1,size:"small",options:l,style:{width:"calc(50% - 12px)"},onBlur:L=>i(U)},null,8,["value","onUpdate:value","onBlur"]),e(b,{value:U.newValue,"onUpdate:value":L=>U.newValue=L,size:"small",style:{width:"calc(50% - 12px)"},onBlur:L=>r(U)},null,8,["value","onUpdate:value","onBlur"]),e(j,{type:"text",size:"small",onClick:L=>u(U.key)},{icon:t(()=>[e(y)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(j,{type:"dashed",size:"small",style:{width:"calc(100% - 24px)"},onClick:s},{icon:t(()=>[e(O)]),_:1})],16,mn)}}});const bn=x("h1",null,"属性",-1),xn=$({__name:"default",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[bn,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"类型"},{default:t(()=>[e(_,{value:n(o).type,"onUpdate:value":l[0]||(l[0]=a=>n(o).type=a)},null,8,["value"])]),_:1}),e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[1]||(l[1]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[2]||(l[2]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[3]||(l[3]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),yn=x("h1",null,"流程属性",-1),gn=$({__name:"top",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=C,r=te,a=D,d=ne;return c(),w(z,null,[yn,e(d,null,{default:t(()=>[e(r,{key:"general",tab:"常规"},{default:t(()=>[e(i,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"编号"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=f=>n(o).id=f)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=f=>n(o).text=f),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.discription,"onUpdate:value":l[2]||(l[2]=f=>n(o).properties.discription=f),"auto-size":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(r,{key:"extensions",tab:"扩展"},{default:t(()=>[e(i,{layout:"vertical",class:"properties-panel-form",model:n(o).properties,name:"propsform"},{default:t(()=>[e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(a,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})],64)}}}),wn=["src"],kn=$({__name:"userTask",setup(m){var l;const o=(l=rn.elementTypes.find(_=>_.type==="bpmn:userTask"))==null?void 0:l.icon,p=B();return(_,s)=>{const u=h,i=T,r=M,a=C,d=te,f=D,b=ne;return c(),w("div",null,[x("h1",null,[x("img",{src:n(o)},null,8,wn),V(" 用户任务 ")]),e(b,null,{default:t(()=>[e(d,{key:"general",tab:"常规"},{default:t(()=>[e(a,{layout:"vertical",class:"properties-panel-form",model:n(p),name:"ppform"},{default:t(()=>[e(i,{label:"编号"},{default:t(()=>[e(u,{value:n(p).id,"onUpdate:value":s[0]||(s[0]=y=>n(p).id=y)},null,8,["value"])]),_:1}),e(i,{label:"名称",name:"text"},{default:t(()=>[e(r,{value:n(p).text,"onUpdate:value":s[1]||(s[1]=y=>n(p).text=y),"auto-size":""},null,8,["value"])]),_:1}),e(i,{label:"描述",name:"description"},{default:t(()=>[e(r,{value:n(p).properties.discription,"onUpdate:value":s[2]||(s[2]=y=>n(p).properties.discription=y),"auto-size":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),e(d,{key:"extensions",tab:"扩展"},{default:t(()=>[e(a,{layout:"vertical",class:"properties-panel-form",model:n(p),name:"propsform"},{default:t(()=>[e(i,{label:"扩展属性",name:"properties"},{default:t(()=>[e(f,{value:n(p).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})])}}}),zn=x("h1",null,"路由",-1),A=$({__name:"gateway",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[zn,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"类型",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).type,"onUpdate:value":l[0]||(l[0]=a=>n(o).type=a)},null,8,["value"])]),_:1}),e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[1]||(l[1]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[2]||(l[2]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[3]||(l[3]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),$n=x("h1",null,"连线",-1),Un=$({__name:"sequenceFlow",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[$n,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[2]||(l[2]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),Cn=x("h1",null,"开始",-1),hn=$({__name:"startEvent",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[Cn,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[2]||(l[2]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),Vn=x("h1",null,"结束",-1),Tn=$({__name:"endEvent",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[Vn,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[2]||(l[2]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),Mn=x("h1",null,"服务任务",-1),Bn=$({__name:"serviceTask",setup(m){const o=B();return(p,l)=>{const _=h,s=T,u=M,i=D,r=C;return c(),w(z,null,[Mn,e(r,{layout:"vertical",class:"properties-panel-form",model:n(o),name:"ppform"},{default:t(()=>[e(s,{label:"编号",extra:"唯一标识"},{default:t(()=>[e(_,{value:n(o).id,"onUpdate:value":l[0]||(l[0]=a=>n(o).id=a)},null,8,["value"])]),_:1}),e(s,{label:"名称",name:"text"},{default:t(()=>[e(u,{value:n(o).text,"onUpdate:value":l[1]||(l[1]=a=>n(o).text=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"描述",name:"description"},{default:t(()=>[e(u,{value:n(o).properties.description,"onUpdate:value":l[2]||(l[2]=a=>n(o).properties.description=a),"auto-size":""},null,8,["value"])]),_:1}),e(s,{label:"扩展属性",name:"properties"},{default:t(()=>[e(i,{value:n(o).properties},null,8,["value"])]),_:1})]),_:1},8,["model"])],64)}}}),Dn={default:xn,top:gn,"bpmn:userTask":kn,"bpmn:parallelGateway":A,"bpmn:exclusiveGateway":A,"bpmn:inclusiveGateway":A,"bpmn:eventBasedGateway":A,"bpmn:sequenceFlow":Un,"bpmn:serviceTask":Bn,"bpmn:startEvent":hn,"bpmn:endEvent":Tn},Ln={bpmn:Dn},Pn=x("svg",{class:"icon",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[x("path",{d:"M144 112h232a8 8 0 0 1 8 8v48a8 8 0 0 1-8 8H221.255l216.716 216.716a8 8 0 0 1 0 11.313l-33.942 33.942a8 8 0 0 1-11.313 0L176 221.255V376a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8V144c0-17.673 14.327-32 32-32z m-32 536v232c0 17.673 14.327 32 32 32h232a8 8 0 0 0 8-8v-48a8 8 0 0 0-8-8H221.884l215.901-215.901a8 8 0 0 0 0-11.314l-33.941-33.941a8 8 0 0 0-11.314 0L176 803.374V648a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8z m690.744 200L586.529 631.785a7.999 7.999 0 0 1 0-11.314l33.941-33.941a8 8 0 0 1 11.314 0L848 802.747V648a8 8 0 0 1 8-8h48a8 8 0 0 1 8 8v232c0 17.673-14.327 32-32 32H648a8 8 0 0 1-8-8v-48a8 8 0 0 1 8-8h154.744zM912 376V144c0-17.673-14.327-32-32-32H648a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h155.373l-217.03 217.029a8 8 0 0 0 0 11.314l33.941 33.941a8 8 0 0 0 11.314 0L848 221.882V376a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8z"})],-1),jn=x("svg",{class:"icon",viewBox:"100 100 820 820",width:"1em",height:"1em"},[x("path",{d:"M541.141333 268.864l61.717334 16.938667-132.394667 482.474666-61.717333-16.938666 132.394666-482.474667zM329.002667 298.666667l44.885333 45.610666-175.36 172.586667 175.04 167.573333-44.266667 46.229334L106.666667 517.504 329.002667 298.666667z m355.882666 0l222.336 218.837333L684.586667 730.666667l-44.266667-46.229334 175.018667-167.573333L640 344.277333 684.885333 298.666667z"})],-1),In=$({__name:"toolbar",setup(m){const o=Ve("modeler_context"),{exportPng:p,exportData:l,modelType:_,showMiniMap:s,toggleMiniMap:u,scale:i,zoomOut:r,zoomIn:a,resetZoom:d,fitView:f,modified:b,undoDisable:y,redoDisable:j,undo:E,redo:K,propertiesPanel:O}=o,U=o.modelType.adapters,I=G(!1);return(L,k)=>{const oe=Te,v=ee,le=Me,F=Be,R=De,ae=Le,P=Pe,W=je,se=Ie,_e=Se,H=Ee,ue=Ke,pe=Oe,ie=Fe,re=He,de=Ne,ce=qe,me=Ae,fe=Ge,ve=Je,be=dn;return c(),w(z,null,[e(ve,null,{default:t(()=>[e(H,null,{default:t(()=>[e(v,{disabled:""},{icon:t(()=>[e(oe)]),_:1}),e(v,{disabled:""},{icon:t(()=>[e(le)]),_:1}),e(W,{trigger:["click"]},{overlay:t(()=>[e(R,null,{default:t(()=>[(c(!0),w(z,null,J(n(U),(g,q)=>(c(),S(F,{key:q},{default:t(()=>[V(" 导入 "+N(g.label)+" 文件（*."+N(g.extension)+"） ",1)]),_:2},1024))),128)),e(F,{key:"json"},{default:t(()=>[V(" 导入 JSON 文件（*.json） ")]),_:1})]),_:1})]),default:t(()=>[e(P,{title:"导入"},{default:t(()=>[e(v,{id:"import"},{icon:t(()=>[e(ae)]),_:1})]),_:1})]),_:1}),e(W,{trigger:["click"]},{overlay:t(()=>[e(R,null,{default:t(()=>[(c(!0),w(z,null,J(n(U),(g,q)=>(c(),S(F,{key:q,onClick:En=>n(l)(`${n(_).name}.${g.extension}`,q)},{default:t(()=>[V(" 导出 "+N(g.label)+" 文件（*."+N(g.extension)+"） ",1)]),_:2},1032,["onClick"]))),128)),e(F,{key:"json",onClick:k[0]||(k[0]=g=>n(l)(`${n(_).name}.json`,"json"))},{default:t(()=>[V(" 导出 JSON 文件（*.json） ")]),_:1}),e(se),e(F,{key:"png",onClick:k[1]||(k[1]=g=>n(p)(n(_).name))},{default:t(()=>[V(" 导出图像文件 （*.png） ")]),_:1})]),_:1})]),default:t(()=>[e(P,{title:"导出"},{default:t(()=>[e(v,{id:"export"},{icon:t(()=>[e(_e)]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(v,{disabled:!n(b),type:"primary"},{icon:t(()=>[e(ue)]),default:t(()=>[V(" 保存 ")]),_:1},8,["disabled"])]),_:1}),e(H,null,{default:t(()=>[e(v,{disabled:n(y),onClick:n(E)},{icon:t(()=>[e(pe)]),_:1},8,["disabled","onClick"]),e(v,{disabled:n(j),onClick:n(K)},{icon:t(()=>[e(ie)]),_:1},8,["disabled","onClick"])]),_:1}),e(H,null,{default:t(()=>[e(v,{onClick:n(r)},{icon:t(()=>[e(re)]),_:1},8,["onClick"]),e(P,{title:"点击此处，恢复原始大小和位置"},{default:t(()=>[e(v,{style:{padding:"4px"},onClick:n(d)},{default:t(()=>[V(N(n(i).percentage),1)]),_:1},8,["onClick"])]),_:1}),e(v,{onClick:n(a)},{icon:t(()=>[e(de)]),_:1},8,["onClick"]),e(P,{title:"自适应大小"},{default:t(()=>[e(v,{id:"fitView",onClick:k[2]||(k[2]=g=>n(f)(100))},{icon:t(()=>[e(n(Z),null,{component:t(()=>[Pn]),_:1})]),_:1})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(P,{title:"显示/隐藏 缩略图导航"},{default:t(()=>[e(v,{type:n(s)?"primary":"default",onClick:k[3]||(k[3]=g=>n(u)())},{icon:t(()=>[e(ce)]),_:1},8,["type"])]),_:1}),e(P,{title:"显示/隐藏 属性面板"},{default:t(()=>[e(v,{disabled:n(O).disabled,type:n(O).collapsed?"default":"primary",onClick:n(O).toggleCollapsed},{icon:t(()=>[e(me)]),_:1},8,["disabled","type","onClick"])]),_:1}),e(v,{disabled:""},{icon:t(()=>[e(fe)]),_:1}),e(P,{title:"查看代码"},{default:t(()=>[e(v,{type:I.value?"primary":"default",onClick:k[4]||(k[4]=g=>I.value=!0)},{icon:t(()=>[e(n(Z),null,{component:t(()=>[jn]),_:1})]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),e(be,{visible:I.value,"onUpdate:visible":k[5]||(k[5]=g=>I.value=g),"graph-viewer":n(o)},null,8,["visible","graph-viewer"])],64)}}}),Sn=$({__name:"index",setup(m){const o=G(),p=G(30),l=new URLSearchParams(location.search),_=l.has("modelType")?l.get("modelType"):"bpmn",s=G(_),u=X.find(b=>b.name===s.value)||X[0],i=Ln[u.name],a=cn(u,i,o,{adjustEdgeStartAndEnd:!0,edgeTextDraggable:!0,multipleSelectKey:"meta",grid:{size:5,visible:!1},style:{nodeText:{overflowMode:"autoWrap"}},keyboard:{enabled:!0},plugins:[nn,tn,on,ln,an,sn]}),{propertiesPanel:d}=a;async function f(b){if(!(!o.value||!a.lf)&&b[1]&&b[1].size){const y=b[1].size;d.collapsed=y<5,p.value=y}}return _n("modeler_context",a),Re(()=>{u.newData&&a.setDataObject(u.newData)}),(b,y)=>{const j=un,E=pn,K=We;return c(),S(K,{style:{height:"100%",width:"100%",margin:"0",overflow:"hidden"}},{default:t(()=>[e(j,{style:{background:"#fff",height:"42px","line-height":"32px",padding:"5px 10px"}},{default:t(()=>[e(In)]),_:1}),e(E,null,{default:t(()=>[e(n(Ze),{class:"default-theme","dbl-click-splitter":!1,"push-other-panes":!1,onResized:f},{default:t(()=>[e(n(Q),{size:n(d).collapsed?100-p.value/100:100-p.value},{default:t(()=>[x("div",{ref_key:"container",ref:o,style:{height:"100%",width:"100%",padding:"4px","box-shadow":"0 0 4px rgb(0 0 0 / 30%) inset",background:"#fff"}},null,512)]),_:1},8,["size"]),Qe(e(n(Q),{size:n(d).collapsed?p.value/100:p.value,style:{padding:"10px","background-color":"#f8f8f8",overflow:"hidden auto"}},{default:t(()=>[(c(),S(Ye,null,[(c(),S(en(n(d).component)))],1024))]),_:1},8,["size"]),[[Xe,!n(d).collapsed]])]),_:1})]),_:1})]),_:1})}}});xe(Sn);
